# โ Spec ุฌุงูุฒ: ุงููุตุฑููุงุช ูุงูุฎุฒููุฉ

## ูุธุฑุฉ ุนุงูุฉ

ุชู ุฅูุดุงุก spec ูุงูู ูููุฒุชู **ุงููุตุฑููุงุช** ู**ุงูุฎุฒููุฉ** ูู ูุธุงู KasserPro.

**ุงููููุน**: `.kiro/specs/expenses-and-cash-register/`

---

## ๐ ุงููููุงุช ุงููููุดุฃุฉ

### 1. requirements.md
**ุงูุญุฌู**: ~350 ุณุทุฑ  
**ุงููุญุชูู**:
- 7 ุฃูุณุงู ุฑุฆูุณูุฉ ูููุชุทูุจุงุช
- 40+ User Story
- 100+ ูุนูุงุฑ ูุจูู
- ููุงุนุฏ ุงูุนูู ุงูุชูุตูููุฉ
- ุงูุตูุงุญูุงุช (Admin vs Cashier)
- ูุนุงููุฑ ุงููุฌุงุญ

**ุงูุฃูุณุงู**:
1. ุงููุตุฑููุงุช (Expenses)
2. ุงูุฎุฒููุฉ (Cash Register)
3. ุงูุชูุงูู ูุน ุงูููุฒุงุช ุงูููุฌูุฏุฉ
4. ุงูุตูุงุญูุงุช
5. ููุงุนุฏ ุงูุนูู
6. ุงููุชุทูุจุงุช ุบูุฑ ุงููุธูููุฉ
7. ูุนุงููุฑ ุงููุฌุงุญ

### 2. design.md
**ุงูุญุฌู**: ~200 ุณุทุฑ  
**ุงููุญุชูู**:
- Database Schema (4 ุฌุฏุงูู ุฌุฏูุฏุฉ + ุชุนุฏูู Shift)
- Domain Layer (Entities + Enums)
- Application Layer (DTOs + Services)
- API Layer (20+ Endpoints)
- Frontend (Pages + Components + Routes)
- Business Rules
- Integration Points

**ุงูุฌุฏุงูู ุงูุฌุฏูุฏุฉ**:
- ExpenseCategory
- Expense
- ExpenseAttachment
- CashRegisterTransaction

### 3. tasks.md
**ุงูุญุฌู**: ~250 ุณุทุฑ  
**ุงููุญุชูู**:
- 7 ูุฑุงุญู ุชูููุฐ
- 100+ ูููุฉ ูุฑุนูุฉ
- ุชูุณูู ูุงุถุญ ููุนูู
- ูุนุงููุฑ ุงูุฅูุฌุงุฒ

**ุงููุฑุงุญู**:
1. Domain & Infrastructure (Backend Foundation)
2. Application Layer (Business Logic)
3. API Layer (Controllers)
4. Integration (ุฑุจุท ูุน ุงูููุฒุงุช ุงูููุฌูุฏุฉ)
5. Frontend - Types & API
6. Frontend - Pages & Components
7. Testing & Documentation

---

## ๐ฏ ุงูููุฒุงุช ุงูุฑุฆูุณูุฉ

### ุงููุตุฑููุงุช (Expenses)
- โ ุชุณุฌูู ุงููุตุฑููุงุช ูุน ุงูุชุตูููุงุช
- โ Workflow: Draft โ Approved โ Paid
- โ ุฑูุน ุงููุฑููุงุช (ุตูุฑ ุงูููุงุชูุฑ)
- โ ุงูุฑุจุท ุจุงููุฑุฏูุงุช
- โ ุทุฑู ุฏูุน ูุชุนุฏุฏุฉ (Cash, Card, BankTransfer)
- โ ุชูุงุฑูุฑ ุชูุตูููุฉ

### ุงูุฎุฒููุฉ (Cash Register)
- โ ุชุชุจุน ุฑุตูุฏ ุงูุฎุฒููุฉ ููู ูุฑุน
- โ ุฃููุงุน ูุนุงููุงุช ูุชุนุฏุฏุฉ (Opening, Deposit, Withdrawal, Sale, Refund, Expense, etc.)
- โ ุงูุชุณููุฉ ุนูุฏ ุฅุบูุงู ุงููุฑุฏูุฉ
- โ ุงูุชุญููู ุจูู ุงููุฑูุน
- โ ุงูุชูุงูู ุงูุชููุงุฆู ูุน ุงูุทูุจุงุช ูุงููุตุฑููุงุช
- โ Audit Trail ูุงูู

---

## ๐ ููุงุท ุงูุชูุงูู

### ูุน ุงููุฑุฏูุงุช (Shifts)
- Opening cash balance ุนูุฏ ูุชุญ ุงููุฑุฏูุฉ
- Reconciliation ุนูุฏ ุฅุบูุงู ุงููุฑุฏูุฉ
- ุฑุจุท ุงููุตุฑููุงุช ุจุงููุฑุฏูุงุช

### ูุน ุงูุทูุจุงุช (Orders)
- ุงูุฏูุน ุงูููุฏู ูุญุฏุซ ุงูุฎุฒููุฉ ุชููุงุฆูุงู
- ุงูุงุณุชุฑุฌุงุน ุงูููุฏู ูุญุฏุซ ุงูุฎุฒููุฉ ุชููุงุฆูุงู

### ูุน ููุงุชูุฑ ุงูุดุฑุงุก (Purchase Invoices)
- ุงูุฏูุน ุงูููุฏู ููููุฑุฏูู ูุญุฏุซ ุงูุฎุฒููุฉ ุชููุงุฆูุงู

---

## ๐ ุงูุฅุญุตุงุฆูุงุช

- **ุนุฏุฏ ุงูุฌุฏุงูู ุงูุฌุฏูุฏุฉ**: 4
- **ุนุฏุฏ ุงูู Entities**: 4
- **ุนุฏุฏ ุงูู Enums**: 2
- **ุนุฏุฏ ุงูู API Endpoints**: 20+
- **ุนุฏุฏ ุงูุตูุญุงุช (Frontend)**: 7
- **ุนุฏุฏ ุงูู Components**: 8+
- **ุนุฏุฏ ุงูููุงู**: 100+
- **ุงููุฏุฉ ุงููุชููุนุฉ**: 4-5 ุฃูุงู

---

## ๐ ููููุฉ ุงูุจุฏุก

### ุงูุฎุทูุฉ 1: ูุฑุงุฌุนุฉ ุงููุชุทูุจุงุช
```bash
# ุงูุชุญ ููู ุงููุชุทูุจุงุช
code .kiro/specs/expenses-and-cash-register/requirements.md
```

### ุงูุฎุทูุฉ 2: ูุฑุงุฌุนุฉ ุงูุชุตููู
```bash
# ุงูุชุญ ููู ุงูุชุตููู
code .kiro/specs/expenses-and-cash-register/design.md
```

### ุงูุฎุทูุฉ 3: ุงูุจุฏุก ุจุงูุชูููุฐ
```bash
# ุงูุชุญ ููู ุงูููุงู
code .kiro/specs/expenses-and-cash-register/tasks.md
```

**ุงุจุฏุฃ ุจุงููุฑุญูุฉ 1: Domain & Infrastructure**

---

## ๐ก ูุตุงุฆุญ ููุชูููุฐ

### 1. ุงุชุจุน ุงูุชุฑุชูุจ
- ููุฐ ุงููุฑุงุญู ุจุงูุชุฑุชูุจ (1 โ 7)
- ูุง ุชููุฒ ุจูู ุงููุฑุงุญู
- ุฃููู ูู ูุฑุญูุฉ ูุจู ุงูุงูุชูุงู ููุชุงููุฉ

### 2. ุงุณุชุฎุฏู Transactions
- ูู ุนูููุฉ ุชุคุซุฑ ุนูู ุงูุฎุฒููุฉ ูุฌุจ ุฃู ุชููู ูู Transaction
- ExpenseService.PayAsync โ Transaction
- CashRegisterService.CreateTransactionAsync โ Transaction
- CashRegisterService.ReconcileAsync โ Transaction

### 3. Multi-Tenancy
- ุชุฃูุฏ ูู TenantId ู BranchId ูู ูู Entity
- ุงุณุชุฎุฏู ICurrentUserService ุฏุงุฆูุงู
- ูุง ุชูุชุจ IDs ูุฏููุงู

### 4. Audit Trail
- ุณุฌู ูู ุงูุนูููุงุช ูู AuditLog
- ุงุญูุธ ูุนูููุงุช ุงููุณุชุฎุฏู (UserId, UserName)
- ุงุญูุธ ุงูุชูุงุฑูุฎ (CreatedAt, ApprovedAt, PaidAt, etc.)

### 5. Validation
- Backend: Data Annotations + Business Rules
- Frontend: Form Validation + User-friendly messages
- Error Codes ููุญุฏุฉ

### 6. Testing
- ุงูุชุจ Tests ุฃุซูุงุก ุงูุชุทููุฑุ ููุณ ุจุนุฏู
- Unit Tests ููู Business Logic
- Integration Tests ููู Workflows
- E2E Tests ููู Critical Paths

---

## ๐ฏ ุงูุฃููููุงุช

### Must Have (ูุฌุจ ุชูููุฐูุง)
- โ ูู ุงููุฑุงุญู 1-6
- โ ุงูุชูุงูู ูุน Shifts/Orders/Purchase Invoices
- โ Reconciliation
- โ Audit Trail

### Nice to Have (ูููู ุชุฃุฌูููุง)
- โณ Recurring expenses
- โณ Multi-currency support
- โณ Advanced reports (charts, analytics)
- โณ Export to Excel/PDF

---

## ๐ ููุงุญุธุงุช ูููุฉ

### 1. Cash Register Balance
- ูุชู ุญุณุงุจู ูู ุงููุนุงููุงุชุ ููุณ stored value
- BalanceBefore ู BalanceAfter ูู ูู ูุนุงููุฉ ููุชุฏููู
- Reconciliation ูุตุญุญ ุงูุฑุตูุฏ ุฅุฐุง ูุงู ููุงู ูุฑู

### 2. Expense Workflow
- Draft: ูููู ุงูุชุนุฏูู/ุงูุญุฐู
- Approved: ูุง ูููู ุงูุชุนุฏููุ ูููู ุงูุฏูุน
- Paid: ูุง ูููู ุงูุชุนุฏูู/ุงูุญุฐู
- Rejected: ูุง ูููู ุงูุชุนุฏูู/ุงูุญุฐู

### 3. Permissions
- Admin: ูู ุงูุตูุงุญูุงุช
- Cashier: ูุตุฑููุงุช ุตุบูุฑุฉ ููุทุ ุชุณููุฉ ูุฑุฏูุชู ููุท

### 4. File Uploads
- ุญูุธ ุงููููุงุช ูู: `uploads/{tenantId}/expenses/{expenseId}/`
- ุฃููุงุน ูุณููุญุฉ: JPG, PNG, PDF
- ุญุฏ ุฃูุตู: 5 MB ููู ููู

---

## โ ุงูุฎุทูุงุช ุงูุชุงููุฉ

1. **ูุฑุงุฌุนุฉ ุงูู Spec**: ุงูุฑุฃ ุงููููุงุช ุงูุซูุงุซุฉ ุจุนูุงูุฉ
2. **ุทุฑุญ ุงูุฃุณุฆูุฉ**: ุฅุฐุง ูุงู ููุงู ุฃู ุบููุถ
3. **ุงูุจุฏุก ุจุงูุชูููุฐ**: ุงุจุฏุฃ ุจุงููุฑุญูุฉ 1 ูู tasks.md
4. **ุงูุชุญุฏูุซ ุงููุณุชูุฑ**: ุญุฏุซ ุญุงูุฉ ุงูููุงู ูู tasks.md

---

**ุงูุญุงูุฉ**: โ ุฌุงูุฒ ููุชูููุฐ  
**ุงูุชุงุฑูุฎ**: 29 ููุงูุฑ 2026  
**ุงููุฏุฉ ุงููุชููุนุฉ**: 4-5 ุฃูุงู

---

## ๐ ููุฎุต

ุชู ุฅูุดุงุก spec ุดุงูู ูุชูุตููู ูููุฒุชู ุงููุตุฑููุงุช ูุงูุฎุฒููุฉ. ุงูู Spec ูุบุทู:
- โ ุงููุชุทูุจุงุช ุงููุธูููุฉ ูุบูุฑ ุงููุธูููุฉ
- โ ุงูุชุตููู ุงูุชููู ุงููุงูู
- โ ุฎุทุฉ ุชูููุฐ ููุตูุฉ (100+ ูููุฉ)
- โ ููุงุท ุงูุชูุงูู ูุน ุงูููุฒุงุช ุงูููุฌูุฏุฉ
- โ ููุงุนุฏ ุงูุนูู ูุงูุตูุงุญูุงุช
- โ ูุนุงููุฑ ุงููุฌุงุญ

**ููููู ุงูุขู ุงูุจุฏุก ุจุงูุชูููุฐ! ๐**
