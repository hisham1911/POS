# Market-Ready Business Features Spec

## نظرة عامة

هذا الـ spec يغطي 7 ميزات أساسية لجعل نظام KasserPro جاهز للسوق وقابل للبيع، بناءً على بحث شامل لأفضل الممارسات العالمية في 2026.

## الميزات المشمولة

1. ✅ **فواتير الشراء وعلاقة المورد بالمنتج** (Purchase Invoices & Supplier-Product Relationship)
2. ✅ **تحسينات إدارة الورديات** (Shift Management Enhancements)
3. ✅ **المخزون الخاص بكل فرع** (Branch-Specific Inventory)
4. ✅ **التكامل مع الأجهزة** (Hardware Integration - Printers & Scanners)
5. ✅ **تحديث بيانات الاختبار** (Test Data Refresh/Seed Data)
6. ✅ **الخزينة** (Cash Register/Khazina)
7. ✅ **المصروفات** (Expenses/Masroufat)
8. ⏸️ **لوحة التحكم** (Dashboard) - مؤجل
9. ⏸️ **تحسينات الواجهة** (UI/UX Improvements) - مؤجل

## الحالة الحالية

- **النظام**: 97% جاهز تقنياً
- **الهدف**: إضافة ميزات الأعمال لجعله قابل للبيع
- **النشر**: محلي فقط في البداية (تأجيل إصلاحات الأمان)
- **البحث**: تم إجراء بحث شامل عن أفضل الممارسات 2026

## الملفات

- `requirements.md` - المتطلبات التفصيلية (36 قصة مستخدم)
- `RESEARCH_FINDINGS.md` - نتائج البحث الشامل (40+ مصدر)
- `SUMMARY.md` - ملخص القرارات المبنية على البحث
- `design.md` - التصميم الفني والمعماري (قريباً)
- `tasks.md` - خطة التنفيذ (قريباً)

## القرارات الرئيسية (بعد البحث)

### 1. الأدوار
✅ **Admin + Cashier** فقط (كما هو حالياً)
- بسيط ومناسب لـ SME
- يمكن إضافة Manager لاحقاً

### 2. الإعدادات
✅ **Hybrid Model** (نموذج هجين)
- إعدادات ثابتة: ضريبة، عملة، منطقة زمنية
- إعدادات مرنة: أسعار، طابعة، حد إعادة الطلب

### 3. فواتير الشراء
✅ **لا تعديل بعد التأكيد**
- استخدام Cancellation + Return
- اسأل المستخدم عن المخزون عند الإلغاء

### 4. الورديات
✅ **تسليم + إغلاق بالقوة + تنبيهات + استعادة**
- 7-Minute Handover Framework
- Force Close (Admin فقط + سبب)
- تنبيه 12 ساعة عدم نشاط
- استعادة تلقائية بعد التعطل

### 5. المصروفات
✅ **حد موافقة 1000 جنيه**
- < 1000: تُعتمد تلقائياً
- ≥ 1000: تحتاج موافقة Admin
- مصروفات متكررة

### 6. الخزينة
✅ **تسوية يومية + تنبيه 5%**
- حساب الفرق بين المتوقع والفعلي
- تنبيه إذا الفرق > 5%

### 7. المخزون
✅ **مخزون منفصل + أسعار مختلفة**
- كل فرع له مخزون منفصل
- كل فرع يمكنه تحديد أسعار مختلفة
- نقل بين الفروع (Admin فقط)

## المراجع

تم البحث في 40+ مقال ودراسة من:
- **POS Systems**: SpicePOS, Lightspeed, Rezku, Toast, Square
- **ERP Systems**: Microsoft Dynamics, SAP, ERPNext, Odoo, NetSuite
- **Best Practices**: Healthcare, Retail, Multi-Location Management
- **Year**: 2026 (أحدث الممارسات)

## ملاحظات مهمة

- **الكود المحترم**: التركيز على الجودة وليس السرعة
- **البحث أولاً**: تم البحث عن أفضل الممارسات قبل التصميم
- **الموافقة المسبقة**: الحصول على موافقة المستخدم قبل التنفيذ
- **اتباع القواعد**: الالتزام الصارم بقواعد `architecture.md`

## الخطوات التالية

1. ✅ جمع المتطلبات - **تم**
2. ✅ البحث الشامل - **تم**
3. ✅ تحديد القرارات - **تم**
4. ⏳ إنشاء التصميم التقني (design.md) - **التالي**
5. ⏳ إنشاء خطة التنفيذ (tasks.md)
6. ⏳ الحصول على موافقة المستخدم
7. ⏳ البدء في التنفيذ

## التاريخ

- **تاريخ الإنشاء**: 27 يناير 2026
- **آخر تحديث**: 27 يناير 2026
- **الحالة**: جاهز للتصميم التقني
