# ุฅุตูุงุญ ูุดููุฉ ุงูุงุชุตุงู ูู ุฃุฌูุฒุฉ ุฃุฎุฑู ุนูู ุงูุดุจูุฉ
# Network Multi-Device Access - Fix Guide

**ุงูุชุงุฑูุฎ:** 25 ูุจุฑุงูุฑ 2026  
**ุงููุดููุฉ:** ุงูุฃุฌูุฒุฉ ุงูุฃุฎุฑู ุนูู ููุณ ุงูุดุจูุฉ ูุง ุชุณุชุทูุน ุงููุตูู ุฅูู KasserPro

---

## ๐ ุงููุดููุฉ ุงูููุชุดูุฉ

ุนูุฏ ูุญุต ุงูุฅุนุฏุงุฏุงุชุ ูุฌุฏูุง ุฃู:

```powershell
netstat -ano | findstr ":5243"
# ุงููุชูุฌุฉ:
TCP    127.0.0.1:5243         0.0.0.0:0              LISTENING
TCP    [::1]:5243             [::]:0                 LISTENING
```

**ุงููุดููุฉ:** ุงูุจุฑูุงูุฌ ูุณุชูุน ููุท ุนูู `127.0.0.1` (localhost) ุจุฏูุงู ูู `0.0.0.0` (ุฌููุน ุงูุดุจูุงุช)

---

## โ ุงูุญู - 3 ุฎุทูุงุช

### ุงูุฎุทูุฉ 1: ุชุดุบูู ุณูุฑูุจุช ุงูุฅุนุฏุงุฏ (ููุณุคูู)

```powershell
# ุงูุชุญ PowerShell ููุณุคูู (Run as Administrator)
cd F:\POS
.\setup-network-access.ps1
```

**ูุงุฐุง ููุนู ุงูุณูุฑูุจุช:**
- ูุนุฑุถ ุนูุงููู IP ุงูุฎุงุตุฉ ุจู
- ูุฒูู ููุงุนุฏ Firewall ุงููุฏููุฉ
- ูุถูู ูุงุนุฏุฉ ุฌุฏูุฏุฉ ููุณูุงุญ ุจุงูุงุชุตุงู ุนูู ุงููููุฐ 5243
- ูุนุฑุถ ุชุนูููุงุช ุงูุงุชุตุงู

---

### ุงูุฎุทูุฉ 2: ุฅุนุงุฏุฉ ุชุดุบูู Backend

```powershell
# ุฃููู ุงูุจุฑูุงูุฌ ุฅุฐุง ูุงู ูุนูู
Get-Process dotnet | Stop-Process -Force

# ุงุจุฏุฃ ูู ุฌุฏูุฏ
cd backend\KasserPro.API
dotnet run
```

**ุชุญูู ูู ุงููุชูุฌุฉ:**
ูุฌุจ ุฃู ุชุฑู:
```
info: Microsoft.Hosting.Lifetime[14]
      Now listening on: http://0.0.0.0:5243
```

**โ ุฅุฐุง ุฑุฃูุช `0.0.0.0:5243` - ููุชุงุฒ!**  
**โ ุฅุฐุง ุฑุฃูุช `127.0.0.1:5243` - ููุงู ูุดููุฉ**

---

### ุงูุฎุทูุฉ 3: ุงุฎุชุจุงุฑ ุงูุงุชุตุงู

#### ุนูู ุงูุฌูุงุฒ ุงูุฑุฆูุณู:
```
ุงูุชุญ ุงููุชุตูุญ: http://localhost:5243
```

#### ุนูู ุฌูุงุฒ ุขุฎุฑ (ููุณ ุงูุดุจูุฉ):
```
1. ุงุนุฑู IP ุงูุฌูุงุฒ ุงูุฑุฆูุณู:
   ipconfig | findstr "IPv4"
   # ูุซุงู: 192.168.1.5

2. ุงูุชุญ ุงููุชุตูุญ ุนูู ุงูุฌูุงุฒ ุงูุขุฎุฑ:
   http://192.168.1.5:5243
```

---

## ๐ง ุงูุชุบููุฑุงุช ุงูุชู ุชูุช

### 1. appsettings.json
```json
{
  "AllowedOrigins": ["*"]  // โ ุชู ุงูุฅุถุงูุฉ: ุงูุณูุงุญ ูุฌููุน ุงูุฃุฌูุฒุฉ
}
```

### 2. launchSettings.json
```json
{
  "applicationUrl": "http://0.0.0.0:5243"  // โ ุชู ุงูุชุบููุฑ ูู localhost
}
```

### 3. Firewall Rule
```powershell
New-NetFirewallRule `
  -DisplayName "KasserPro API (TCP 5243)" `
  -Direction Inbound `
  -Protocol TCP `
  -LocalPort 5243 `
  -Action Allow
```

---

## ๐งช ุงูุชุญูู ูู ุงูุฅุตูุงุญ

### ุงุฎุชุจุงุฑ 1: ูุญุต ุงููููุฐ
```powershell
netstat -ano | findstr ":5243"
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
```
TCP    0.0.0.0:5243           0.0.0.0:0              LISTENING
```

โ ุฅุฐุง ุฑุฃูุช `0.0.0.0:5243` - ุงูุฅุนุฏุงุฏ ุตุญูุญ!

---

### ุงุฎุชุจุงุฑ 2: ูุญุต Firewall
```powershell
Get-NetFirewallRule -DisplayName "*KasserPro*" | Select-Object DisplayName, Enabled, Action
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
```
DisplayName                  Enabled Action
-----------                  ------- ------
KasserPro API (TCP 5243)     True    Allow
```

---

### ุงุฎุชุจุงุฑ 3: ุงุฎุชุจุงุฑ ุงูุงุชุตุงู ูู ุฌูุงุฒ ุขุฎุฑ
```powershell
# ุนูู ุงูุฌูุงุฒ ุงูุขุฎุฑ (ููุณ ุงูุดุจูุฉ)
curl http://192.168.1.5:5243/api/system/health
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
```json
{
  "success": true,
  "status": "healthy",
  "timestamp": "2026-02-25T..."
}
```

---

## ๐จ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุงููุดููุฉ 1: ูุง ูุฒุงู ูุณุชูุน ุนูู 127.0.0.1

**ุงูุญู:**
```powershell
# ุชุฃูุฏ ูู ุฃู launchSettings.json ูุญุชูู ุนูู:
"applicationUrl": "http://0.0.0.0:5243"

# ูููุณ:
"applicationUrl": "http://localhost:5243"

# ุซู ุฃุนุฏ ุงูุชุดุบูู
```

---

### ุงููุดููุฉ 2: CORS Error ุนูู ุงูุฌูุงุฒ ุงูุขุฎุฑ

**ุงูุฃุนุฑุงุถ:**
```
Access to XMLHttpRequest has been blocked by CORS policy
```

**ุงูุญู:**
ุชุฃูุฏ ูู ุฃู `appsettings.json` ูุญุชูู ุนูู:
```json
{
  "AllowedOrigins": ["*"]
}
```

---

### ุงููุดููุฉ 3: Connection Refused

**ุงูุฃุณุจุงุจ ุงููุญุชููุฉ:**

1. **Firewall ูุญุฌุจ ุงูุงุชุตุงู**
   ```powershell
   # ุชุญูู ูู ุงููุงุนุฏุฉ
   Get-NetFirewallRule -DisplayName "KasserPro API (TCP 5243)"
   
   # ุฅุฐุง ูู ุชูู ููุฌูุฏุฉุ ุดุบู ุงูุณูุฑูุจุช ูุฑุฉ ุฃุฎุฑู
   .\setup-network-access.ps1
   ```

2. **ุงูุฃุฌูุฒุฉ ุนูู ุดุจูุงุช ูุฎุชููุฉ**
   ```powershell
   # ุนูู ุงูุฌูุงุฒ ุงูุฑุฆูุณู
   ipconfig | findstr "IPv4"
   # ูุซุงู: 192.168.1.5
   
   # ุนูู ุงูุฌูุงุฒ ุงูุขุฎุฑ
   ipconfig | findstr "IPv4"
   # ูุฌุจ ุฃู ูููู: 192.168.1.X (ููุณ ุงูุดุจูุฉ)
   ```

3. **AP Isolation ููุนู ุนูู ุงูุฑุงูุชุฑ**
   - ุงุฏุฎู ุฅุนุฏุงุฏุงุช ุงูุฑุงูุชุฑ
   - ุงุจุญุซ ุนู "AP Isolation" ุฃู "Client Isolation"
   - ุชุฃูุฏ ูู ุฃูู **ูุนุทู (Disabled)**

4. **Antivirus ูุญุฌุจ ุงูุงุชุตุงู**
   ```powershell
   # ุฌุฑุจ ุชุนุทูู Antivirus ูุคูุชุงู ููุงุฎุชุจุงุฑ
   # ุฅุฐุง ูุฌุญุ ุฃุถู ุงุณุชุซูุงุก ูู KasserPro
   ```

---

### ุงููุดููุฉ 4: ูุนูู ุนูู Windows ููู ูุง ูุนูู ุนูู ุงูููุจุงูู

**ุงูุญู:**
```
1. ุชุฃูุฏ ุฃู ุงูููุจุงูู ุนูู ููุณ WiFi (ููุณ Mobile Data)
2. ุฌุฑุจ ุงุณุชุฎุฏุงู IP ุจุฏูุงู ูู ุงุณู ุงูุฌูุงุฒ:
   โ http://192.168.1.5:5243
   โ http://DESKTOP-ABC:5243
3. ุชุฃูุฏ ุฃู Guest WiFi ูุนุทู (ุงุณุชุฎุฏู ุงูุดุจูุฉ ุงูุฑุฆูุณูุฉ)
```

---

## ๐ ุฃูุงูุฑ ุงูุชุดุฎูุต ุงูุณุฑูุนุฉ

### ูุนุฑูุฉ IP ุงูุฎุงุต ุจู
```powershell
ipconfig | findstr "IPv4"
```

### ูุญุต ุงููููุฐ
```powershell
netstat -ano | findstr ":5243"
```

### ูุญุต Firewall
```powershell
Get-NetFirewallRule -DisplayName "*KasserPro*"
```

### ุงุฎุชุจุงุฑ ุงูุงุชุตุงู
```powershell
# ูู ููุณ ุงูุฌูุงุฒ
curl http://localhost:5243/api/system/health

# ูู ุฌูุงุฒ ุขุฎุฑ (ุงุณุชุจุฏู IP)
curl http://192.168.1.5:5243/api/system/health
```

### ุฅููุงู ุฌููุน ุนูููุงุช dotnet
```powershell
Get-Process dotnet | Stop-Process -Force
```

---

## ๐ฏ ุงูุฎูุงุตุฉ

**ุงูุชุบููุฑุงุช ุงูุฃุณุงุณูุฉ:**
1. โ `appsettings.json` - ุฃุถููุง `"AllowedOrigins": ["*"]`
2. โ `launchSettings.json` - ุบูุฑูุง ูู `localhost` ุฅูู `0.0.0.0`
3. โ Firewall Rule - ุฃุถููุง ูุงุนุฏุฉ ููุณูุงุญ ุจุงููููุฐ 5243
4. โ ุณูุฑูุจุช ุงูุฅุนุฏุงุฏ - `setup-network-access.ps1` ููุฅุนุฏุงุฏ ุงูุชููุงุฆู

**ุจุนุฏ ูุฐู ุงูุชุบููุฑุงุช:**
- โ ุงูุฌูุงุฒ ุงูุฑุฆูุณู ูุณุชูุน ุนูู ุฌููุน ุงูุดุจูุงุช
- โ CORS ูุณูุญ ูุฌููุน ุงูุฃุฌูุฒุฉ
- โ Firewall ูุณูุญ ุจุงูุงุชุตุงูุงุช ุงููุงุฑุฏุฉ
- โ ุงูุฃุฌูุฒุฉ ุงูุฃุฎุฑู ุชุณุชุทูุน ุงููุตูู ุนุจุฑ IP

---

## ๐ ุงูุฏุนู

ุฅุฐุง ุงุณุชูุฑุช ุงููุดููุฉ ุจุนุฏ ุชุทุจูู ุฌููุน ุงูุฎุทูุงุช:

1. **ุฌูุน ูุนูููุงุช ุงูุชุดุฎูุต:**
   ```powershell
   # ุงุญูุธ ุงููุชุงุฆุฌ ูู ููู
   @"
   === Network Configuration ===
   $(ipconfig /all)
   
   === Port Status ===
   $(netstat -ano | findstr ":5243")
   
   === Firewall Rules ===
   $(Get-NetFirewallRule -DisplayName "*KasserPro*" | Format-List)
   
   === Backend Logs ===
   $(Get-Content backend\KasserPro.API\logs\kasserpro-*.log -Tail 50)
   "@ | Out-File diagnostics.txt
   
   Write-Host "Diagnostics saved to: diagnostics.txt"
   ```

2. **ุฑุงุฌุน ุงูุชูุซูู:**
   - `ADVANCED_TROUBLESHOOTING_GUIDE.md`
   - `NETWORK_MULTI_DEVICE_COMPLETE_DOCUMENTATION.md`

3. **ุงุชุตู ุจุงูุฏุนู ุงูููู**

---

**ุชู ุงูุฅุตูุงุญ ุจูุงุณุทุฉ:** Kiro AI  
**ุงูุชุงุฑูุฎ:** 25 ูุจุฑุงูุฑ 2026  
**ุงูุญุงูุฉ:** โ ุฌุงูุฒ ููุงุฎุชุจุงุฑ
