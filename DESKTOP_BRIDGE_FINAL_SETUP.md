# ๐ฏ Desktop Bridge App - ุงูุฅุนุฏุงุฏ ุงูููุงุฆู

## โ ุงููุถุน ุงูุญุงูู

### Backend API
- โ ูุนูู ุจูุฌุงุญ
- ๐ HTTPS: `https://localhost:7189`
- ๐ HTTP: `http://localhost:5243`
- ๐ก SignalR Hub: `/hubs/devices`

### Desktop Bridge App
- โ ูุนูู ูู System Tray (Process ID: 1380)
- ๐ Settings: `%AppData%\KasserPro\settings.json`
- ๐ Logs: `%AppData%\KasserPro\logs\`
- ๐จ๏ธ 7 ุทุงุจุนุงุช ูุชุงุญุฉ (ุจูุง ูููุง XP-90 ุงูุญุฑุงุฑูุฉ)

### ูุง ูุญุชุงุฌ ุฅุนุฏุงุฏ
โ๏ธ **Backend URL** - ูุญุชุงุฌ ุชุญุฏูุซ ูู `https://localhost:5243` ุฅูู `https://localhost:7189`
โ๏ธ **API Key** - ูุญุชุงุฌ ุฅุฏุฎุงู (ุงุณุชุฎุฏู: `test-api-key-123`)
โ๏ธ **Default Printer** - ูุญุชุงุฌ ุงุฎุชูุงุฑ (ุงุฎุชุฑ: `XP-90` ุฃู `Microsoft Print to PDF`)

---

## ๐ ุฎุทูุงุช ุงูุฅุนุฏุงุฏ ุงูุณุฑูุน

### ุงูุฎุทูุฉ 1: ุงูุชุญ ูุงูุฐุฉ ุงูุฅุนุฏุงุฏุงุช

1. ุงุจุญุซ ุนู ุฃููููุฉ ุงูุชุทุจูู ูู **System Tray** (ุจุฌุงูุจ ุงูุณุงุนุฉ)
2. ุงุถุบุท **Double-Click** ุนูู ุงูุฃููููุฉ
   - ุฃู ุงุถุบุท **Right-Click** โ **Settings**

### ุงูุฎุทูุฉ 2: ุฃุฏุฎู ุงูุจูุงูุงุช

ุณุชุธูุฑ ูุงูุฐุฉ ูุจูุฑุฉ (600x550) ูุน ุงูุญููู ุงูุชุงููุฉ:

#### 1. ุนููุงู ุงูุฎุงุฏู - Backend URL
```
https://localhost:7189
```
โ๏ธ **ููู**: ุงุณุชุฎุฏู ุงููููุฐ `7189` ูููุณ `5243`

#### 2. ููุชุงุญ API - API Key
```
test-api-key-123
```
(ุฃู ุฃู ูููุฉ ููุงุฎุชุจุงุฑ)

#### 3. ูุนุฑู ุงูุฌูุงุฒ - Device ID
```
af4528a5-db11-4628-b55f-c95ca8ea60df
```
(ูููุฑุงุกุฉ ููุท - ุชู ุฅูุดุงุคู ุชููุงุฆูุงู)

#### 4. ุงูุทุงุจุนุฉ ุงูุงูุชุฑุงุถูุฉ - Default Printer

ุงุฎุชุฑ ูุงุญุฏุฉ ูู:
- **XP-90** (ุงูุทุงุจุนุฉ ุงูุญุฑุงุฑูุฉ ุงูุญููููุฉ) โ ููุถู
- **Microsoft Print to PDF** (ููุงุฎุชุจุงุฑ)
- ุฃู ุทุงุจุนุฉ ุฃุฎุฑู ูุชุงุญุฉ

ุฅุฐุง ูู ุชุธูุฑ ุงูุทุงุจุนุงุชุ ุงุถุบุท ุฒุฑ **"ุชุญุฏูุซ ูุงุฆูุฉ ุงูุทุงุจุนุงุช"**

### ุงูุฎุทูุฉ 3: ุงุญูุธ ุงูุฅุนุฏุงุฏุงุช

1. ุงุถุบุท ุงูุฒุฑ ุงูุฃุฎุถุฑ ุงููุจูุฑ: **๐พ ุญูุธ - Save**
2. ุณุชุธูุฑ ุฑุณุงูุฉ: "ุชู ุญูุธ ุงูุฅุนุฏุงุฏุงุช ุจูุฌุงุญ!"
3. ุณูุญุงูู ุงูุชุทุจูู ุงูุงุชุตุงู ุจุงูู Backend ุชููุงุฆูุงู
4. ุงูุชุธุฑ 2-3 ุซูุงูู
5. ุชุญูู ูู **ุญุงูุฉ ุงูุงุชุตุงู** ูู ุงููุงูุฐุฉ:
   - โ **"ูุชุตู - Connected"** (ุฃุฎุถุฑ) = ูุฌุญ ุงูุงุชุตุงู
   - โ **"ุบูุฑ ูุชุตู - Disconnected"** (ุฃุญูุฑ) = ูุดู ุงูุงุชุตุงู

---

## ๐งช ุงุฎุชุจุงุฑ ุงูุทุจุงุนุฉ

### ุงูุทุฑููุฉ 1: ูู System Tray

1. ุงุถุบุท **Right-Click** ุนูู ุฃููููุฉ ุงูุชุทุจูู
2. ุงุฎุชุฑ **"Test Print"**
3. ุณุชุทุจุน ูุงุชูุฑุฉ ุชุฌุฑูุจูุฉ

### ุงูุทุฑููุฉ 2: ูู Backend API

ุงูุชุญ PowerShell ูุดุบู:

```powershell
Invoke-RestMethod -Uri "https://localhost:7189/api/DeviceTest/test-print" -Method Post -SkipCertificateCheck
```

ุณุชุทุจุน ูุงุชูุฑุฉ ุชุฌุฑูุจูุฉ ุจุงูุนุฑุจูุฉ ูุงูุฅูุฌููุฒูุฉ.

### ุงูุทุฑููุฉ 3: ูู ุงููุชุตูุญ

ุงูุชุญ Swagger UI:
```
https://localhost:7189/swagger
```

1. ุงุจุญุซ ุนู `/api/DeviceTest/test-print`
2. ุงุถุบุท **Try it out**
3. ุงุถุบุท **Execute**

---

## ๐ ุงูุชุญูู ูู ุงูุญุงูุฉ

### 1. ุญุงูุฉ ุงูุงุชุตุงู ูู Desktop App

ุงูุชุญ Settings window ูุดุงูุฏ:
- โ **"ูุชุตู - Connected"** (ุฃุฎุถุฑ) = ูู ุดูุก ูุนูู
- โ **"ุบูุฑ ูุชุตู - Disconnected"** (ุฃุญูุฑ) = ูุดููุฉ ูู ุงูุงุชุตุงู

### 2. ุญุงูุฉ ุงูุฃุฌูุฒุฉ ุงููุชุตูุฉ ูู Backend

```powershell
Invoke-RestMethod -Uri "https://localhost:7189/api/DeviceTest/status" -SkipCertificateCheck
```

ุงููุชูุฌุฉ ุงููุชููุนุฉ:
```json
{
  "connectedDevices": 1,
  "hubEndpoint": "/hubs/devices",
  "status": "Online"
}
```

### 3. ุนุฑุถ Logs

```powershell
Get-Content "$env:APPDATA\KasserPro\logs\bridge-app$(Get-Date -Format 'yyyyMMdd').log" -Tail 20
```

ุงุจุญุซ ุนู:
- โ `"Connected to Device Hub successfully"` = ูุฌุญ ุงูุงุชุตุงู
- โ `"Received print command"` = ุงุณุชูู ุฃูุฑ ุทุจุงุนุฉ
- โ `"Receipt printed successfully"` = ูุฌุญุช ุงูุทุจุงุนุฉ

---

## ๐ง ุญู ุงููุดุงูู

### ุงููุดููุฉ 1: "ุบูุฑ ูุชุตู - Disconnected"

**ุงูุฃุณุจุงุจ ุงููุญุชููุฉ:**
1. Backend ุบูุฑ ูุดุบู
2. Backend URL ุฎุงุทุฆ
3. API Key ุฎุงุทุฆ ุฃู ูุงุฑุบ

**ุงูุญู:**
```powershell
# ุชุญูู ูู ุฃู Backend ูุนูู
Get-Process | Where-Object {$_.ProcessName -eq "dotnet"}

# ุฅุฐุง ูู ููู ูุนููุ ุดุบูู:
cd G:\POS\src\KasserPro.API
dotnet run --launch-profile https
```

ุงูุชุธุฑ ุญุชู ุชุฑู:
```
Now listening on: https://localhost:7189
```

ุซู ุงูุชุญ Settings ูู Desktop App ูุชุฃูุฏ ูู:
- Backend URL: `https://localhost:7189`
- API Key: `test-api-key-123`

ุงุถุบุท Save ูุงูุชุธุฑ 2-3 ุซูุงูู.

### ุงููุดููุฉ 2: "No default printer configured"

**ุงูุญู:**
1. ุงูุชุญ Settings
2. ุงุถุบุท **"ุชุญุฏูุซ ูุงุฆูุฉ ุงูุทุงุจุนุงุช"**
3. ุงุฎุชุฑ ุทุงุจุนุฉ ูู ุงููุงุฆูุฉ
4. ุงุถุบุท **Save**

### ุงููุดููุฉ 3: ุงูุทุจุงุนุฉ ูุง ุชุนูู

**ุงูุญู:**
1. ุชุญูู ูู ุฃู ุงูุทุงุจุนุฉ ูุดุบูุฉ ููุชุตูุฉ
2. ุฌุฑุจ ุทุจุงุนุฉ ูู ุจุฑูุงูุฌ ุขุฎุฑ (Notepad) ููุชุฃูุฏ
3. ุดุงูุฏ ุงูู Logs:
```powershell
Get-Content "$env:APPDATA\KasserPro\logs\bridge-app$(Get-Date -Format 'yyyyMMdd').log" -Tail 50
```

### ุงููุดููุฉ 4: ุงููุงูุฐุฉ ูุง ุชูุชุญ

**ุงูุญู:**
1. ุชุญูู ูู ุฃู ุงูุชุทุจูู ูุนูู:
```powershell
Get-Process | Where-Object {$_.ProcessName -like "*KasserPro*"}
```

2. ุฅุฐุง ูู ููู ูุนููุ ุดุบูู:
```powershell
cd G:\POS
Start-Process -FilePath "src\KasserPro.BridgeApp\bin\Debug\net9.0-windows\KasserPro.BridgeApp.exe"
```

3. ุงุจุญุซ ุนู ุงูุฃููููุฉ ูู System Tray

### ุงููุดููุฉ 5: ุงูุฃุฒุฑุงุฑ ูุง ุชุธูุฑ

**ุงูุญู:**
1. ูุจุฑ ุงููุงูุฐุฉ (ุงุณุญุจ ุงูุญูุงู)
2. ุฃู scroll ูุฃุณูู
3. ุงููุงูุฐุฉ ุงูุขู 600x550 ูุงูุฃุฒุฑุงุฑ ูุจูุฑุฉ ููุงุถุญุฉ

---

## ๐ ุงูุฅุนุฏุงุฏุงุช ุงูููุตู ุจูุง

### ููุงุฎุชุจุงุฑ (Development)
```json
{
  "DeviceId": "af4528a5-db11-4628-b55f-c95ca8ea60df",
  "BackendUrl": "https://localhost:7189",
  "ApiKey": "test-api-key-123",
  "DefaultPrinterName": "Microsoft Print to PDF"
}
```

### ููุฅูุชุงุฌ (Production)
```json
{
  "DeviceId": "af4528a5-db11-4628-b55f-c95ca8ea60df",
  "BackendUrl": "https://localhost:7189",
  "ApiKey": "test-api-key-123",
  "DefaultPrinterName": "XP-90"
}
```

---

## ๐ฏ ุงูุฎุทูุงุช ุงูุชุงููุฉ

ุจุนุฏ ุงูุฅุนุฏุงุฏ ุงููุงุฌุญ:

### 1. ุงุฎุชุจุฑ ุงูุทุจุงุนุฉ
```powershell
Invoke-RestMethod -Uri "https://localhost:7189/api/DeviceTest/test-print" -Method Post -SkipCertificateCheck
```

### 2. ุชุญูู ูู ุงููุงุชูุฑุฉ ุงููุทุจูุนุฉ

ูุฌุจ ุฃู ุชุญุชูู ุนูู:
- โ ุงุณู ุงููุฑุน (ุนุฑุจู ูุฅูุฌููุฒู)
- โ ุฑูู ุงููุงุชูุฑุฉ
- โ ุงูุชุงุฑูุฎ ูุงูููุช
- โ ูุงุฆูุฉ ุงูููุชุฌุงุช
- โ ุงูุฅุฌูุงูู ุงููุฑุนู
- โ ุงูุถุฑูุจุฉ (14%)
- โ ุงูุฅุฌูุงูู ุงูููุงุฆู
- โ ุทุฑููุฉ ุงูุฏูุน
- โ ุงุณู ุงููุงุดูุฑ
- โ Barcode

### 3. ุงุฎุชุจุฑ ูุน ุทุงุจุนุฉ ุญุฑุงุฑูุฉ ุญููููุฉ

ุบูุฑ ุงูุทุงุจุนุฉ ุฅูู `XP-90` ูุงุฎุชุจุฑ ูุฑุฉ ุฃุฎุฑู.

### 4. ุฏูุฌ ูุน POS System

ุงูุขู ููููู ุฏูุฌ Desktop Bridge ูุน ูุธุงู POS:

```csharp
// ูู OrdersController.cs
await _deviceCommandService.SendPrintCommandAsync(receipt);
```

---

## ๐ ุงููุซุงุฆู ุงูุฅุถุงููุฉ

- **DESKTOP_BRIDGE_README.md** - ุงููุซุงุฆู ุงูุดุงููุฉ
- **DESKTOP_BRIDGE_QUICK_START.md** - ุฏููู ุงูุจุฏุก ุงูุณุฑูุน
- **DESKTOP_BRIDGE_TESTING_GUIDE.md** - ุฏููู ุงูุงุฎุชุจุงุฑ ุงููุงูู
- **HOW_TO_USE_DESKTOP_BRIDGE.md** - ุฏููู ุงูุงุณุชุฎุฏุงู

---

## โ Checklist ุงูููุงุฆู

ูุจู ุฃู ุชุจุฏุฃ ุงูุงุณุชุฎุฏุงูุ ุชุฃูุฏ ูู:

- [ ] Backend ูุนูู ุนูู `https://localhost:7189`
- [ ] Desktop App ูุนูู ูู System Tray
- [ ] Settings ูุถุจูุทุฉ ุจุดูู ุตุญูุญ:
  - [ ] Backend URL: `https://localhost:7189`
  - [ ] API Key: `test-api-key-123`
  - [ ] Default Printer: ูุญุฏุฏ
- [ ] ุญุงูุฉ ุงูุงุชุตุงู: **"ูุชุตู - Connected"** (ุฃุฎุถุฑ)
- [ ] Test Print ูุนูู ุจูุฌุงุญ
- [ ] ุงููุงุชูุฑุฉ ุชุทุจุน ุจุดูู ุตุญูุญ

---

## ๐ ูุจุฑูู!

ุฅุฐุง ุงูุชููุช ุฌููุน ุงูุฎุทูุงุช ุจูุฌุงุญุ ูุฅู Desktop Bridge App ุฌุงูุฒ ููุงุณุชุฎุฏุงู! ๐

**ุงูุชุทุจูู ุงูุขู:**
- โ ูุชุตู ุจุงูู Backend
- โ ูุณุชูุจู ุฃูุงูุฑ ุงูุทุจุงุนุฉ
- โ ูุทุจุน ุงูููุงุชูุฑ
- โ ูุฑุณู ุชุฃููุฏ ุงูุทุจุงุนุฉ
- โ ูุนูุฏ ุงูุงุชุตุงู ุชููุงุฆูุงู ุนูุฏ ุงูุงููุทุงุน

**ุงุณุชูุชุน ุจุงูุงุณุชุฎุฏุงู!** ๐
